server {
    listen 8080;
    server_name _;
    
    root /usr/share/nginx/html;
    index index.html;
    
    # Tipos MIME
    types {
        text/html                             html htm shtml;
        text/css                              css;
        text/xml                              xml;
        image/gif                             gif;
        image/jpeg                            jpeg jpg;
        application/javascript                js;
        application/json                      json;
        application/pdf                       pdf;
        image/png                             png;
        image/svg+xml                         svg svgz;
        text/plain                            txt;
        application/vnd.android.package-archive apk;
    }
    
    default_type application/octet-stream;
    
    # Habilitar listagem de diret√≥rios para /apk
    location /apk/ {
        autoindex on;
        autoindex_exact_size off;
        autoindex_localtime on;
    }
    
    # Habilitar listagem para /updates
    location /updates/ {
        autoindex on;
        autoindex_exact_size off;
        autoindex_localtime on;
    }
    
    # CORS para API de updates
    location ~* \.(apk|json)$ {
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Methods "GET, OPTIONS";
        add_header Access-Control-Allow-Headers "Content-Type";
    }
    
    # Cache para APKs
    location ~* \.apk$ {
        expires 1d;
        add_header Cache-Control "public, immutable";
    }
}
